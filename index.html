
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    
    <title>py-makefile-dbparse &#8212; py-makefile-dbparse</title>

    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-4.3.1-dist/flatly/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinxbootstrap4.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/sphinxbootstrap4.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Classes" href="Classes/index.html" /> 
  </head><body>
  <nav class="navbar navbar-expand-md  fixed-top navbar-dark bg-dark flex-wrap">
    <button class="navbar-toggler ml-auto py-2" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar2">
      &#9776;
    </button>
      <div class="navbar-collapse collapse" id="exCollapsingNavbar2">
           <a class="navbar-brand py-1" href="#">
                  py-makefile-dbparse
          </a>
          <ul class="navbar-nav mr-auto">
          
              <li class="nav-item dropdown" id="navbar-pages">
                  <a class="nav-link dropdown-toggle" data-toggle="dropdown">Pages</a>
                  <ul class="dropdown-menu">
                  <ul>
<li class="toctree-l1"><a class="reference internal" href="Classes/index.html">Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeFile.html">MakeFile Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeFile.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeLauncher.html">MakeLauncher Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeLauncher.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeTarget.html">MakeTarget Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeTarget.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeVarList.html">MakeVarList Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeVarList.html#class-description">Class Description</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Examples/index.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Examples/SimpleExample.html">Simple Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Examples/SconsExample.html">SCons Example</a></li>
</ul>
</li>
</ul>

                  </ul>
              </li>
              <li class="nav-item">
              <a  class="nav-link" href="#">Home</a></li>
              <li class="nav-item">
              
                  <a  class="nav-link" href="http://example.com">Link</a></li>
          </ul>
          <div class="dropdown-divider d-block d-sm-none mb-4"></div>
             
<form class="form-inline" action="search.html" method="get">
  <input type="text" name="q" class="form-control" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <!--<div class="row hidden-sm-up">
          <div class="collapse navbar-toggleable-xs container" id="exCollapsingNavbar2">
              <div class="container">
             　　 <a class="navbar-brand" href="#">
                      py-makefile-dbparse
                  </a>
              </div>
              <ul class="nav navbar-nav">
                  <li>
                  <a  class="nav-link" href="#">Home</a></li>
                  <li>
                  
                      <a  class="nav-link" href="http://example.com">Link</a></li>
              </ul>
              <div class="dropdown-divider"></div>
              <div class="navbar-text">search<div>
              
<form class="form-inline" action="search.html" method="get">
  <input type="text" name="q" class="form-control" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          </div>
      </div>-->
    </nav>
  </div>

    <div class="related d-flex justify-content-between bg-light flex-wrap" role="navigation" aria-label="related navigation">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">py-makefile-dbparse</a></li>
            <li class="breadcrumb-item active">py-makefile-dbparse</li>
        </ol>
       <div>
          <div class="btn-group btn-group-sm" role="group" aria-label="Basic example">
               <a href="Classes/index.html" title="Next Chapter: Classes" class="btn btn-primary" role="botton" accesskey="N">
                   Classes &raquo;
               </a>
           </div>
       </div>
    </div>

  <div class="main container-fluid">
    <div class="row"> 
      <div class="sphinxsidebar d-none d-md-block">
        <div class="sphinxsidebarwrapper">          
            <h4>Table Of Contents</h4>
            
            
              <div class="sidebartoctree">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="Classes/index.html">Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeFile.html">MakeFile Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeFile.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeLauncher.html">MakeLauncher Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeLauncher.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeTarget.html">MakeTarget Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeTarget.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeVarList.html">MakeVarList Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeVarList.html#class-description">Class Description</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Examples/index.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Examples/SimpleExample.html">Simple Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Examples/SconsExample.html">SCons Example</a></li>
</ul>
</li>
</ul>

              </div>
            
          
  <div class="local-toc-heading">
  <h3><a href="#">Table of Contents</a></h3>
  </div>
  <div class="local-toc">
  <ul>
<li><a class="reference internal" href="#">py-makefile-dbparse</a><ul>
<li><a class="reference internal" href="#how-it-works">How it works</a></li>
<li><a class="reference internal" href="#development">Development</a></li>
<li><a class="reference internal" href="#simiar-projects">Simiar Projects</a></li>
</ul>
</li>
</ul>

  </div>
<div id="searchbox" style="display: none">
    <form class="form search" action="search.html" method="get">
      <input type="text" name="q" class="form-control" placeholder="Search..." />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>

<script type="text/javascript">$('#searchbox').show(0);</script>

            
            <hr />
            <ul>
                
                <li class="toctree-l1"><a href="/genindex.html">Page index</a></li>
                
            </ul>
            
        </div>
      </div> 

      <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="py-makefile-dbparse">
<h1>py-makefile-dbparse<a class="headerlink" href="#py-makefile-dbparse" title="Permalink to this headline">¶</a></h1>
<p>A tool for extracting information from Makefiles for use with build systems such as scons. <br>
make is used to extract the Makefile database information without actually building any sources</p>
<p>The original reason I wrote this was to try and partially port some C sources across from Makefiles to Scons
without having to port all the Makefiles all at once.
So make is effectively passing on some of it’s information onto python which can then use scons to handle the building.
(one example of where this can help is when your trying to build something under windows instead of linux)</p>
<div class="section" id="how-it-works">
<h2>How it works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>The way this library typically works is to run an installed copy of <strong>make</strong> against a given Makefile within a directory structure. <br>
The option used is typically “-pn” which dumps the make database to stdout, this library then attempts to parse this output to extract information such as</p>
<ul class="simple">
<li><p>Make variables such as lists of sources or object files</p></li>
<li><p>Targets to be built</p></li>
<li><p>Dependencies for targets</p></li>
<li><p>Compile options for targets</p></li>
</ul>
<p>There’s also the option to:</p>
<ul class="simple">
<li><p>Read an existing Makefile into memory</p></li>
<li><p>Add on a target / rule to the Makefile in memory to output the result of a specific variable or set of variables</p></li>
<li><p>This handles situations where the variable may contain modifiers / make functions (such as subst)</p></li>
<li><p>Then run the altered Makefile in memory using make to output and capture the information (without building the sources)</p></li>
</ul>
</div>
<div class="section" id="development">
<h2>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h2>
<p>To develop or try out the examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">virtenv</span>
<span class="c1"># windows</span>
<span class="n">setup_venv</span><span class="o">.</span><span class="n">bat</span>
<span class="c1"># Linux</span>
<span class="n">setup_venv</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Then open <strong>py-makefile-dbparse.code-workspace</strong> within Visual Studio Code</p>
</div>
<div class="section" id="simiar-projects">
<h2>Simiar Projects<a class="headerlink" href="#simiar-projects" title="Permalink to this headline">¶</a></h2>
<p>The idea for this was based on another library called make_var</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/karnigen/make_var">make-var</a></p></li>
</ul>
<p>There’s also some other libraries that provide similar information</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/tqdm/py-make">py-make</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/compiledb/">compiledb</a></p></li>
</ul>
<p>I’ve discovered that py-make seems to have limits on the compatibility with existing Makefiles
and compiledb doesn’t show all the information I need, but does provide some interesting infromation.</p>
<p>With this library I’m actually using make to extract the build information as part of a gradual porting process to a different build system.
This makes parsing the makefiles a bit easier</p>
<div class="toctree-wrapper compound" id="mastertoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Classes/index.html">Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeFile.html">MakeFile Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeFile.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeLauncher.html">MakeLauncher Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeLauncher.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeTarget.html">MakeTarget Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeTarget.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Classes/MakeVarList.html">MakeVarList Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Classes/MakeVarList.html#class-description">Class Description</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Examples/index.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Examples/SimpleExample.html">Simple Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Examples/SconsExample.html">SCons Example</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
    </div>
      <div class="clearer"></div>
      </div>
    </div>
<footer class="footer d-flex justify-content-between flex-wrap">
    <div class="copyright">
        <div>&copy; Copyright 2019, Hecatrons Workshop.</div>
      <div>Last updated on Oct 04, 2019.</div>
      <div>Generated by <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.2.0 using <a href="https://github.com/myyasuda/sphinxbootstrap4theme">sphinxbootstrap4theme</a> 0.6.0.</div>
    </div>
    <div>
        <a href="#" class="btn btn-primary btn-sm" role="botton">Back to top</a>
    </div>
</footer>
  </body>
</html>